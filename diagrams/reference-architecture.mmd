flowchart LR
  %% =========================================
  %% Diagram 1: Quality Orchestration (Leader View)
  %% Left → Right narrative
  %% Vertical stacks inside boxes
  %% =========================================

  %% INPUTS (VERTICAL STACK)
  subgraph IN["Quality Signals (Inputs)"]
    direction TB
    IN1["Tests & validation results"]
    IN2["Production behavior<br/>(availability, errors, latency)"]
    IN3["Customer impact<br/>(support, UX signals)"]
  end

  %% DECISION BRAIN (VERTICAL STACK)
  subgraph QB["Quality Orchestration (Decision Brain)"]
    direction TB
    QB1["Signal confidence<br/>(reliability & freshness)"]
    QB2["Risk interpretation<br/>(what changed & what matters)"]
    QB3["Policy alignment<br/>(risk tolerance & thresholds)"]
  end

  %% OUTPUTS (VERTICAL STACK – already correct)
  subgraph OUT["Decisions (Outputs)"]
    direction TB
    OUT1["Release readiness"]
    OUT2["CI/CD gating guidance"]
    OUT3["Ops response priorities"]
    OUT4["Leadership visibility<br/>(risk & confidence)"]
  end

  %% PRIMARY FLOW (BOX TO BOX ONLY)
  IN --> QB --> OUT

  %% LEARNING LOOP (BOTTOM, NON-INTRUSIVE)
  subgraph LEARN["Learning & Outcomes"]
    direction TB
    L1["Incidents & defects<br/>(post-release outcomes)"]
  end

  OUT3 --> L1
  OUT1 --> L1
  L1 -. "refines confidence & policy" .-> QB
